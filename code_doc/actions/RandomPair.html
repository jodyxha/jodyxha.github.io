
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>RandomPair &#8212; QHG4 4.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jody.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    
    <link rel="shortcut icon" href="http://aim-bigfoot.uzh.ch/~QHG/pmwiki/pub/skins/sinorca/gfx/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Fertility" href="Fertility.html" />
    <link rel="prev" title="MoveStats" href="MoveStats.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Fertility.html" title="Fertility"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="MoveStats.html" title="MoveStats"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">QHG4 4.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../code_doc.html" >Code Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../actions.html" accesskey="U">actions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">RandomPair</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="randompair">
<span id="randompair-ref"></span><h1>RandomPair<a class="headerlink" href="#randompair" title="Permalink to this heading">¶</a></h1>
<p class="hidden">This page describes the class <span class="target" id="index-0"></span>RandomPair</p>
<p>The class <code class="docutils literal notranslate"><span class="pre">RandomPair</span></code> performs maximal random pairing between all fertile male and female agents (maximal: as many pairings as possible.
For this it maintains an array of vectors, ech vector  containing the ids of the agents in one cell.
This class has no <code class="docutils literal notranslate"><span class="pre">execute()</span></code> method because all pairings must be done before any other action can use them in its own call to <code class="docutils literal notranslate"><span class="pre">execute()</span></code>.</p>
<p>Note: the agent structures of the population must have a member <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">iMateIndex</span></code></p>
<p>Code: <a class="reference external" href="https://github.com/jodyxha/QHG4/blob/main/QHG4/actions/RandomPair.h">RandomPair.h</a> <a class="reference external" href="https://github.com/jodyxha/QHG4/blob/main/QHG4/actions/RandomPair.cpp">RandomPair.cpp</a></p>
<figure class="align-default" id="id1">
<img alt="../../_images/pairing.png" src="../../_images/pairing.png" />
<figcaption>
<p><span class="caption-text">Pairing of agents within cells (blue: males, red: females).</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Attributes:</strong></p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ATTR_RANDOMPAIR_NAME</span></code></p></td>
<td><p>“RandomPair”</p></td>
<td><p>action name</p></td>
</tr>
</tbody>
</table>
<section id="public-methods">
<h2>Public Methods<a class="headerlink" href="#public-methods" title="Permalink to this heading">¶</a></h2>
<section id="constructor">
<h3><code class="docutils literal notranslate"><span class="pre">constructor</span></code><a class="headerlink" href="#constructor" title="Permalink to this heading">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">RandomPair</span><span class="p">(</span><span class="n">SPopulation</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">pPop</span><span class="p">,</span><span class="w"> </span><span class="n">SCellGrid</span><span class="w"> </span><span class="o">*</span><span class="n">pCG</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">sID</span><span class="p">,</span><span class="w"> </span><span class="n">WELL512</span><span class="w"> </span><span class="o">**</span><span class="n">apWELL</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pPop</span></code></dt><dd><p>A pointer to the <a class="reference internal" href="../core/SPopulation.html#spopulation-ref"><span class="std std-ref">SPopulation</span></a> object performing this action.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pCG</span></code></dt><dd><p>A pointer to the  <a class="reference internal" href="../core/SCellGrid.html#scellgrid-ref"><span class="std std-ref">SCellGrid</span></a> object on which the simulation runs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sID</span></code></dt><dd><p>An ID for this action.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">apWELL</span></code></dt><dd><p>A pointer to an array of <a class="reference internal" href="../utils/WELL512.html#well512-ref"><span class="std std-ref">WELL512 random number generators</span></a> (one for each thread)</p>
</dd>
</dl>
<p>Allocates the arrays of vectors for the IDs, as well as bool arrays to mark already paired agents and array of locks needed for parallelized filling of the id vectors.</p>
</section>
<section id="destructor">
<h3><code class="docutils literal notranslate"><span class="pre">destructor</span></code><a class="headerlink" href="#destructor" title="Permalink to this heading">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">virtual</span><span class="w"> </span><span class="o">~</span><span class="n">WeightedMove</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>The destructor deletes all allocated arrays.</p>
</section>
<section id="initialize">
<h3><code class="docutils literal notranslate"><span class="pre">initialize</span></code><a class="headerlink" href="#initialize" title="Permalink to this heading">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">fT</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fT</span></code></dt><dd><p>Current simulation step.</p>
</dd>
</dl>
<p>In this method first the id vectors are cleared and then <code class="docutils literal notranslate"><span class="pre">findMates()</span></code> is called to do the pairing.</p>
</section>
<section id="isequal">
<h3><code class="docutils literal notranslate"><span class="pre">isEqual</span></code><a class="headerlink" href="#isequal" title="Permalink to this heading">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">virtual</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">isEqual</span><span class="p">(</span><span class="n">Action</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">pAction</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bStrict</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pAction</span></code></dt><dd><p>Pointer to an action object to compare with this.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bStrict</span></code></dt><dd><p>Strictness of comparisons (ignored here).</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">pAction</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">this</span></code>, if it is a <code class="docutils literal notranslate"><span class="pre">RandomPair</span></code> object.</p>
</section>
</section>
<section id="protected-methods">
<h2>Protected Methods<a class="headerlink" href="#protected-methods" title="Permalink to this heading">¶</a></h2>
<section id="findmates">
<h3><code class="docutils literal notranslate"><span class="pre">findMates</span></code><a class="headerlink" href="#findmates" title="Permalink to this heading">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">findMates</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>This method (called by <code class="docutils literal notranslate"><span class="pre">initialize()</span></code>) first uses a parallelized loop to fill the id vectors with the IDs of all male and female fertile agents.
Then for each cell as many pairs as possible are selected from the male and female vectors.
It is expected that the agent structures have a field <code class="docutils literal notranslate"><span class="pre">m_iMateIndex</span></code>, since this is set for each paired agent.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">RandomPair</a><ul>
<li><a class="reference internal" href="#public-methods">Public Methods</a><ul>
<li><a class="reference internal" href="#constructor"><code class="docutils literal notranslate"><span class="pre">constructor</span></code></a></li>
<li><a class="reference internal" href="#destructor"><code class="docutils literal notranslate"><span class="pre">destructor</span></code></a></li>
<li><a class="reference internal" href="#initialize"><code class="docutils literal notranslate"><span class="pre">initialize</span></code></a></li>
<li><a class="reference internal" href="#isequal"><code class="docutils literal notranslate"><span class="pre">isEqual</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#protected-methods">Protected Methods</a><ul>
<li><a class="reference internal" href="#findmates"><code class="docutils literal notranslate"><span class="pre">findMates</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="MoveStats.html"
                          title="previous chapter">MoveStats</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Fertility.html"
                          title="next chapter">Fertility</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/code_doc/actions/RandomPair.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Fertility.html" title="Fertility"
             >next</a> |</li>
        <li class="right" >
          <a href="MoveStats.html" title="MoveStats"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">QHG4 4.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../code_doc.html" >Code Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../actions.html" >actions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">RandomPair</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, jodyxha.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
    </div>
  </body>
</html>